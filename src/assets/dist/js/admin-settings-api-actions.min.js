/*!
 * Torro Forms Version 1.0.3 (https://torro-forms.com)
 * Licensed under GNU General Public License v2 (or later) (http://www.gnu.org/licenses/gpl-2.0.html)
 */
!function(t,e,r,i){"use strict";function n(t){return t.replace(/\s+/g,"-").replace(/[^A-Za-z0-9_-]+/g,"").toLowerCase()}var a,s=i.action,l=i.i18n,u=r("#torro_module_actions-field-manager-instance"),c=r(".plugin-lib-repeatable-group-"+s+"__connections-wrap");u.length&&c.length&&r(document).ready(function(){u=u.val(),a=e.FieldManager.instances[u].get(u+"_"+s.replace("_","-")+"--connections"),a.on("changeItemValue:title",function(t,e,i){var a,s;i.slug&&i.slug.length||i.title&&i.title.length&&(a=r("#"+e.id+"-slug"),a.length&&(s=n(i.title),s.length&&a.val(s).trigger("change")))}),t.api.init().done(function(){new t.api.models.ApiAction({action:s}).fetch({data:{context:"view"},context:this,success:function(t){function e(t,e){var a=Object.keys(e.fields),s=r("#"+e.fields.title.labelAttrs.id).children("span");a.forEach(function(a){var l=e.fields[a],u=!1;i.includes(a)||(n[t]&&(u=n[t].includes(a)),u!==l.display&&(l.display=u,l.required=l.display,l.inputAttrs.tabindex=l.display?"0":"-1",l.inputAttrs.required=!!l.required,l.wrapAttrs.class=l.display?l.wrapAttrs.class.replace(" plugin-lib-hidden",""):l.wrapAttrs.class+" plugin-lib-hidden",l.wrapAttrs["aria-hidden"]=l.display?"false":"true",r("#"+l.inputAttrs.id).attr("tabindex",l.inputAttrs.tabindex),r("#"+l.inputAttrs.id).prop("required",l.inputAttrs.required),r("#"+l.wrapAttrs.id).attr("class",l.wrapAttrs.class),r("#"+l.wrapAttrs.id).attr("aria-hidden",l.wrapAttrs["aria-hidden"]),l.required?r("#"+l.labelAttrs.id).append(s.clone()):r("#"+l.labelAttrs.id).children("span").remove()))})}var i=["title","slug","structure"],n={};t.get("structures").forEach(function(t){n[t.slug]=t.authentication_fields}),a.get("items").forEach(function(t){e(t.fields.structure.currentValue,t)}),a.on("addItem",function(t,r){e(r.fields.structure.currentValue,r)}),a.on("changeItemValue:structure",function(t,r,i){i.structure&&i.structure.length&&e(i.structure,r)})},error:function(){console.error(l.couldNotLoadData)}})}).fail(function(){console.error(l.couldNotLoadData)})})}(window.torro,window.pluginLibFieldsAPI,window.jQuery,window.torroAPIActionsData);