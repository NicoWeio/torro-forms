/*!
 * Torro Forms Version 1.0.3 (https://torro-forms.com)
 * Licensed under GNU General Public License v2 (or later) (http://www.gnu.org/licenses/gpl-2.0.html)
 */
!function(e,t,l,a){"use strict";function n(e,t){var l=a.templateTagSlug.replace("%element_id%",e.get("id")),n=a.templateTagGroup,p=t.find(".template-tag-"+l);p&&(p.remove(),t.find(".template-tag-list-group-"+n+" > ul > li").length||t.find(".template-tag-list-group-"+n).remove())}function p(e,t){var n={slug:a.templateTagSlug.replace("%element_id%",e.get("id")),group:a.templateTagGroup,label:a.templateTagLabel.replace("%element_label%",e.get("label")),description:a.templateTagDescription.replace("%element_label%",e.get("label"))},p={slug:a.templateTagGroup,label:a.templateTagGroupLabel},i=l(a.templateTagTemplate.replace(/%slug%/g,n.slug).replace(/%group%/g,n.group).replace(/%label%/g,n.label).replace(/%description%/g,n.description)),r=t.find(".template-tag-list-group-"+n.group+" > ul");r.length||(r=l(a.templateTagGroupTemplate.replace(/%slug%/g,p.slug).replace(/%label%/g,p.label)),t.append(r),r=r.children("ul")),r.append(i),e.on("change:label",function(e,t){var l=a.templateTagLabel.replace("%element_label%",t);i.html(i.html().replace(n.label,l)),n.label=l})}function i(e,t){var l,a=t.parents(".template-tag-list-wrap").prev('input[type="email"]');a.length?(l=e.element_settings.findWhere({name:"input_type"}),l&&("email_address"===l.get("value")&&p(e,t),l.on("change:value",function(l,a){"email_address"===a?p(e,t):n(e,t)}))):p(e,t)}var r=e.Builder.getInstance(),g={};r.on("addElement",function(e){g[e.get("id")]=e,l("#metabox-torro_module_form_settings-tabpanel-privacy .template-tag-list").each(function(){i(e,l(this))})}),r.on("removeElement",function(e){g[e.get("id")]&&delete g[e.get("id")],l("#metabox-torro_module_form_settings-tabpanel-privacy .template-tag-list").each(function(){n(e,l(this))})})}(window.torro,window.pluginLibFieldsAPI,window.jQuery,window.torroDoubleOptin);