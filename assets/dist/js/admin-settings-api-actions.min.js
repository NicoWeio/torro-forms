/*!
 * Torro Forms Version 1.0.3 (https://torro-forms.com)
 * Licensed under GNU General Public License v2 (or later) (http://www.gnu.org/licenses/gpl-2.0.html)
 */
!function(e,t,n,o){"use strict";function c(e){return e.replace(/\s+/g,"-").replace(/[^A-Za-z0-9_-]+/g,"").toLowerCase()}var i,r=o.action,l=o.i18n,a=n("#torro_module_actions-field-manager-instance"),u=n(".plugin-lib-repeatable-group-"+r+"__connections-wrap");a.length&&u.length&&n(document).ready(function(){a=a.val(),i=t.FieldManager.instances[a].get(a+"_"+r.replace("_","-")+"--connections"),console.log(i),i.on("changeItemValue:title",function(e,t,o){var i,r;console.log(o),o.slug&&o.slug.length||o.title&&o.title.length&&(i=n("#"+t.id+"-slug"),i.length&&(r=c(o.title),r.length&&i.val(r).trigger("change")))}),e.api.init().done(function(){new e.api.models.ApiAction({action:r}).fetch({data:{context:"view"},context:this,success:function(e){function t(e,t){console.log(e),console.log(t)}console.log(e),i.get("items").forEach(function(e){t(e.fields.structure.currentValue,e.id)}),i.on("addItem",function(e,n){t(n.fields.structure.currentValue,n.id)}),i.on("changeItemValue:structure",function(e,n,o){o.structure&&o.structure.length&&t(o.structure,n.id)})},error:function(){console.error(l.couldNotLoadData)}})}).fail(function(){console.error(l.couldNotLoadData)})})}(window.torro,window.pluginLibFieldsAPI,window.jQuery,window.torroAPIActionsData);